"use strict";(self.webpackChunkjustin_csd=self.webpackChunkjustin_csd||[]).push([[5956],{28453:(n,s,e)=>{e.d(s,{R:()=>l,x:()=>c});var t=e(96540);const i={},a=t.createContext(i);function l(n){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(s):{...s,...n}}),[s,n])}function c(n){let s;return s=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),t.createElement(a.Provider,{value:s},n.children)}},48833:(n,s,e)=>{e.r(s),e.d(s,{assets:()=>r,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5/mo-algo-with-bitset","title":"\u83ab\u961f\u914d\u5408 biset","description":"bitset \u5e38\u7528\u4e8e\u5e38\u89c4\u6570\u636e\u7ed3\u6784\u96be\u4ee5\u7ef4\u62a4\u7684\u7684\u5224\u5b9a\u3001\u7edf\u8ba1\u95ee\u9898\uff0c\u800c\u83ab\u961f\u53ef\u4ee5\u7ef4\u62a4\u5e38\u89c4\u6570\u636e\u7ed3\u6784\u96be\u4ee5\u7ef4\u62a4\u7684\u533a\u95f4\u4fe1\u606f\u3002\u628a\u4e24\u8005\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\u53ef\u4ee5\u540c\u65f6\u5229\u7528\u4e24\u8005\u7684\u4f18\u52bf\u3002","source":"@site/docs/\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5/mo-algo-with-bitset.md","sourceDirName":"\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5","slug":"/\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5/mo-algo-with-bitset","permalink":"/csd.io/docs/\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5/mo-algo-with-bitset","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"oiSidebar","previous":{"title":"\u83ab\u961f\u4e8c\u6b21\u79bb\u7ebf","permalink":"/csd.io/docs/\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5/mo-algo-secondary-offline"},"next":{"title":"\u666e\u901a\u83ab\u961f\u7b97\u6cd5","permalink":"/csd.io/docs/\u7f16\u7a0b \xb7 \u7287\u7287/\u57fa\u672c\u7b97\u6cd5/\u6742\u9879\u548c\u4e13\u9898/\u83ab\u961f\u7b97\u6cd5/mo-algo"}}');var i=e(74848),a=e(28453);const l={},c="\u83ab\u961f\u914d\u5408 biset",r={},o=[{value:"\u4f8b\u9898 \u300cYnoi2016\u300d\u6389\u8fdb\u5154\u5b50\u6d1e",id:"\u4f8b\u9898-ynoi2016\u6389\u8fdb\u5154\u5b50\u6d1e",level:2},{value:"\u4e60\u9898",id:"\u4e60\u9898",level:2}];function m(n){const s={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",math:"math",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,a.R)(),...n.components},{Details:e}=s;return e||function(n,s){throw new Error("Expected "+(s?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"\u83ab\u961f\u914d\u5408-biset",children:"\u83ab\u961f\u914d\u5408 biset"})}),"\n",(0,i.jsx)(s.p,{children:"bitset \u5e38\u7528\u4e8e\u5e38\u89c4\u6570\u636e\u7ed3\u6784\u96be\u4ee5\u7ef4\u62a4\u7684\u7684\u5224\u5b9a\u3001\u7edf\u8ba1\u95ee\u9898\uff0c\u800c\u83ab\u961f\u53ef\u4ee5\u7ef4\u62a4\u5e38\u89c4\u6570\u636e\u7ed3\u6784\u96be\u4ee5\u7ef4\u62a4\u7684\u533a\u95f4\u4fe1\u606f\u3002\u628a\u4e24\u8005\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\u53ef\u4ee5\u540c\u65f6\u5229\u7528\u4e24\u8005\u7684\u4f18\u52bf\u3002"}),"\n",(0,i.jsxs)(s.h2,{id:"\u4f8b\u9898-ynoi2016\u6389\u8fdb\u5154\u5b50\u6d1e",children:["\u4f8b\u9898 ",(0,i.jsx)(s.a,{href:"https://www.luogu.com.cn/problem/P4688",children:"\u300cYnoi2016\u300d\u6389\u8fdb\u5154\u5b50\u6d1e"})]}),"\n",(0,i.jsxs)(s.p,{children:["\u672c\u9898\u521a\u597d\u7b26\u5408\u4e0a\u9762\u63d0\u5230\u7684\u83ab\u961f\u914d\u5408 bitset \u7684\u7279\u5f81\u3002\u4e0d\u96be\u60f3\u5230\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u7528 bitset \u5b58\u50a8\u6bcf\u4e00\u4e2a\u533a\u95f4\u5185\u7684\u51fa\u73b0\u8fc7\u7684\u6240\u6709\u6743\u503c\uff0c\u4e00\u7ec4\u8be2\u95ee\u7684\u7b54\u6848\u5373\u6240\u6709\u533a\u95f4\u7684\u957f\u5ea6\u548c\u51cf\u53bb\u4e09\u8005\u7684\u5e76\u96c6\u5143\u7d20\u4e2a\u6570 ",(0,i.jsxs)(s.span,{className:"katex",children:[(0,i.jsx)(s.span,{className:"katex-mathml",children:(0,i.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(s.semantics,{children:[(0,i.jsxs)(s.mrow,{children:[(0,i.jsx)(s.mo,{children:"\xd7"}),(0,i.jsx)(s.mn,{children:"3"})]}),(0,i.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\times 3"})]})})}),(0,i.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(s.span,{className:"mord",children:"\xd7"}),(0,i.jsx)(s.span,{className:"mord",children:"3"})]})})]}),"\u3002"]}),"\n",(0,i.jsx)(s.p,{children:"\u4f46\u662f\u5728\u83ab\u961f\u4e2d\u4f7f\u7528 bitset \u4e5f\u9700\u8981\u9488\u5bf9 bitset \u7684\u7279\u6027\u8c03\u6574\u7b97\u6cd5\uff1a"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"bitset \u4e0d\u80fd\u5f88\u597d\u5730\u5904\u7406\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u6743\u503c\u7684\u60c5\u51b5\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u5f53\u524d\u5143\u7d20\u79bb\u6563\u5316\u540e\u7684\u6743\u503c\u4e0e\u5f53\u524d\u533a\u95f4\u7684\u7684\u51fa\u73b0\u6b21\u6570\u4e4b\u548c\u4f5c\u4e3a\u5f80 bitset \u4e2d\u63d2\u5165\u7684\u5bf9\u8c61\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u6211\u4eec\u5e73\u5e38\u4f7f\u7528\u83ab\u961f\u65f6\uff0c\u53ef\u80fd\u4f1a\u4e0d\u6ce8\u610f 4 \u79cd\u79fb\u52a8\u6307\u9488\u7684\u65b9\u6cd5\u987a\u5e8f\uff0c\u6240\u4ee5\u6307\u9488\u79fb\u52a8\u7684\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u533a\u95f4\u7684\u5de6\u7aef\u70b9\u5728\u53f3\u7aef\u70b9\u53f3\u8fb9\uff0c\u533a\u95f4\u957f\u5ea6\u4e3a\u8d1f\u503c\u7684\u60c5\u51b5\uff0c\u5bfc\u81f4\u5143\u7d20\u7684\u4e2a\u6570\u4e3a\u8d1f\u6570\u3002\u8fd9\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\u5e76\u6ca1\u6709\u4ec0\u4e48\u5f71\u54cd\uff0c\u4f46\u662f\u672c\u9898\u4e2d\u5728 bitset \u4e2d\u63d2\u5165\u7684\u5143\u7d20\u4e0e\u5143\u7d20\u4e2a\u6570\u6709\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6ce8\u610f 4 \u79cd\u79fb\u52a8\u6307\u9488\u7684\u65b9\u6cd5\u987a\u5e8f\uff0c\u5c06\u5de6\u53f3\u6307\u9488\u5206\u522b\u5f80\u5de6\u8fb9\u548c\u53f3\u8fb9\u79fb\u52a8\u7684\u8bed\u53e5\u5199\u5728\u524d\u9762\uff0c\u907f\u514d\u5f80 bitset \u4e2d\u63d2\u5165\u8d1f\u6570\u3002"}),"\n",(0,i.jsxs)(s.li,{children:["\u867d\u7136 bitset \u7528\u7a7a\u95f4\u5c0f\uff0c\u4f46\u662f\u4ecd\u7136\u96be\u4ee5\u627f\u53d7 ",(0,i.jsxs)(s.span,{className:"katex",children:[(0,i.jsx)(s.span,{className:"katex-mathml",children:(0,i.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(s.semantics,{children:[(0,i.jsxs)(s.mrow,{children:[(0,i.jsxs)(s.msup,{children:[(0,i.jsx)(s.mn,{children:"10"}),(0,i.jsx)(s.mn,{children:"5"})]}),(0,i.jsx)(s.mo,{children:"\xd7"}),(0,i.jsxs)(s.msup,{children:[(0,i.jsx)(s.mn,{children:"10"}),(0,i.jsx)(s.mn,{children:"5"})]})]}),(0,i.jsx)(s.annotation,{encoding:"application/x-tex",children:"10 ^ 5 \\times 10 ^ 5"})]})})}),(0,i.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"0.8974em",verticalAlign:"-0.0833em"}}),(0,i.jsx)(s.span,{className:"mord",children:"1"}),(0,i.jsxs)(s.span,{className:"mord",children:[(0,i.jsx)(s.span,{className:"mord",children:"0"}),(0,i.jsx)(s.span,{className:"msupsub",children:(0,i.jsx)(s.span,{className:"vlist-t",children:(0,i.jsx)(s.span,{className:"vlist-r",children:(0,i.jsx)(s.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mtight",children:"5"})})]})})})})})]}),(0,i.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,i.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"0.8141em"}}),(0,i.jsx)(s.span,{className:"mord",children:"1"}),(0,i.jsxs)(s.span,{className:"mord",children:[(0,i.jsx)(s.span,{className:"mord",children:"0"}),(0,i.jsx)(s.span,{className:"msupsub",children:(0,i.jsx)(s.span,{className:"vlist-t",children:(0,i.jsx)(s.span,{className:"vlist-r",children:(0,i.jsx)(s.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mtight",children:"5"})})]})})})})})]})]})]})]})," \u7684\u6570\u636e\u89c4\u6a21\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06\u8be2\u95ee\u5212\u5206\u6210\u5e38\u6570\u5757\u5206\u522b\u5904\u7406\uff0c\u4fdd\u8bc1\u7a7a\u95f4\u521a\u597d\u8db3\u591f\u7684\u60c5\u51b5\u4e0b\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u53d8\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(s.p,{children:"\u89e3\u51b3\u65b9\u6848"})}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-cpp",children:"#include <algorithm>\n#include <bitset>\n#include <cmath>\n#include <cstring>\n#include <iostream>\nusing namespace std;\nconstexpr int N = 100005, M = N / 3 + 10;\nint n, m, maxn;\nint a[N], ans[M], cnt[N];\nbitset<N> sum[M], now;\n\nstruct query {\n  int l, r, id;\n\n  bool operator<(const query& x) const {\n    if (l / maxn != x.l / maxn) return l < x.l;\n    return (l / maxn) & 1 ? r < x.r : r > x.r;\n  }\n} q[M * 3];\n\nvoid static_set() {\n  static int tmp[N];\n  memcpy(tmp, a, sizeof(a));\n  sort(tmp + 1, tmp + n + 1);\n  for (int i = 1; i <= n; i++)\n    a[i] = lower_bound(tmp + 1, tmp + n + 1, a[i]) - tmp;\n}\n\nvoid add(int x) {\n  now.set(x + cnt[x]);\n  cnt[x]++;\n}\n\nvoid del(int x) {\n  cnt[x]--;\n  now.reset(x + cnt[x]);\n}\n\nvoid solve() {\n  int cnt = 0, tot = 0;\n  now.reset();\n  for (tot = 0; tot < M - 5 && m; tot++) {\n    m--;\n    ans[tot] = 0;\n    sum[tot].set();\n    for (int j = 0; j < 3; j++) {\n      cin >> q[cnt].l >> q[cnt].r;\n      q[cnt].id = tot;\n      ans[tot] += q[cnt].r - q[cnt].l + 1;\n      cnt++;\n    }\n  }\n  sort(q, q + cnt);\n  for (int i = 0, l = 1, r = 0; i < cnt; i++) {\n    while (l > q[i].l) add(a[--l]);\n    while (r < q[i].r) add(a[++r]);\n    while (l < q[i].l) del(a[l++]);\n    while (r > q[i].r) del(a[r--]);\n    sum[q[i].id] &= now;\n  }\n  for (int i = 0; i < tot; i++)\n    cout << ans[i] - (int)sum[i].count() * 3 << '\\n';\n}\n\nint main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  cin >> n >> m;\n  for (int i = 1; i <= n; i++) cin >> a[i];\n  static_set();\n  maxn = sqrt(n);\n  solve();\n  memset(cnt, 0, sizeof(cnt));\n  solve();\n  memset(cnt, 0, sizeof(cnt));\n  solve();\n  return 0;\n}\n"})})]}),"\n",(0,i.jsx)(s.h2,{id:"\u4e60\u9898",children:"\u4e60\u9898"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://www.luogu.com.cn/problem/P3674",children:"\u5c0f\u6e05\u65b0\u4eba\u6e23\u7684\u672c\u613f"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://www.luogu.com.cn/problem/P5355",children:"\u300cYnoi2017\u300d\u7531\u4e43\u7684\u7389\u7c73\u7530"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://www.luogu.com.cn/problem/P5313",children:"\u300cYnoi2011\u300dWBLT"})}),"\n"]})]})}function d(n={}){const{wrapper:s}={...(0,a.R)(),...n.components};return s?(0,i.jsx)(s,{...n,children:(0,i.jsx)(m,{...n})}):m(n)}}}]);